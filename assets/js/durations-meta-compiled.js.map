{"version":3,"sources":["durations-meta.js"],"names":[],"mappings":"aAAA,CAAC,CAAC,UAAY,CAuCV,QAAS,CAAA,CAAT,CAA+B,CAA/B,CAAkC,CAC9B,GAAM,CAAA,CAAK,EAAU,CAAC,CAAC,MAAF,CAAS,KAA9B,CACG,MAAM,CAAC,KAAP,CAAa,CAAb,GAAuB,CAAC,MAAM,CAAC,SAAP,CAAiB,CAAjB,CAAxB,EAA2D,CAAR,CAAA,CAAnD,EAAwE,GAAR,CAAA,CAAhE,EAAgF,CAAC,MAAM,CAAC,QAAP,CAAgB,CAAhB,CAFtD,CAG1B,CAAC,CAAC,MAAF,CAAS,SAAT,CAAmB,GAAnB,sBAH0B,CAK1B,CAAC,CAAC,MAAF,CAAS,SAAT,CAAmB,MAAnB,sBAL0B,CAO9B,CAAU,EACb,CAED,QAAS,CAAA,CAAT,EAA4B,CACrB,CAAS,CAAC,GAAV,KAAoB,CAAa,CAAC,IAAlC,EAA0C,CAAS,CAAC,GAAV,KAAoB,CAAa,CAAC,IADvD,CAEpB,CAAW,CAAC,MAAZ,IAFoB,CAIpB,CAAW,CAAC,MAAZ,IAEP,CAED,QAAS,CAAA,CAAT,EAAsB,IACZ,CAAA,CAAI,CAAG,CAAS,CAAC,QAAV,uBAA6C,CAA7C,EAAwD,CAAS,CAAC,GAAV,EADnD,CAEZ,CAAI,CAAG,CAAS,CAAC,QAAV,uBAA6C,CAA7C,EAAwD,CAAS,CAAC,GAAV,EAFnD,CAGZ,CAAG,CAAG,CAAI,CAAG,CAHD,CAIf,CAJe,EAKd,CAAmB,CAAC,MAApB,IALc,CAMd,CAAgB,CAAC,IAAjB,CAAsB,CAAtB,CANc,EAQd,CAAmB,CAAC,MAApB,IAGP,CApES,GACJ,CAAA,CAAS,CAAG,CAAC,CAAC,iCAAD,CADT,CAEJ,CAAS,CAAG,CAAC,CAAC,iCAAD,CAFT,CAGJ,CAAW,CAAG,CAAC,CAAC,6BAAD,CAHX,CAIJ,CAAmB,CAAG,CAAC,CAAC,wBAAD,CAJnB,CAKJ,CAAgB,CAAG,CAAC,CAAC,gBAAD,CALhB,CAOJ,CAAa,CAAG,CAClB,IAAI,CAAE,CAAS,CAAC,GAAV,EADY,CAElB,IAAI,CAAE,CAAS,CAAC,GAAV,EAFY,CAPZ,CAYP,CAAE,CAAa,CAAC,IAAf,EAAwB,CAAa,CAAC,IAAvC,GACwC,CAApC,IAAO,CAAgB,CAAC,IAAjB,EAbJ,EAcN,CAAmB,CAAC,MAApB,IAdM,CAiBV,CAAS,CACJ,GADL,CACS,CADT,EAEK,IAFL,CAEU,SAAU,CAAV,CAAa,CACf,CAAqB,CAAC,CAAD,CADN,CAEf,CAAgB,EACnB,CALL,EAMK,EANL,CAMQ,OANR,CAMiB,SAAU,CAAV,CAAa,CACJ,EAAd,GAAA,CAAC,CAAC,OADgB,GAElB,CAAqB,CAAC,CAAD,CAFH,CAGlB,CAAgB,EAHE,CAKzB,CAXL,CAjBU,CA8BV,EAAE,CAAC,IAAH,CAAQ,SAAR,CAAkB,UAAY,IACpB,CAAA,CAAQ,CAAG,EAAE,CAAC,IAAH,CAAQ,MAAR,CAAe,aAAf,EAA8B,YAA9B,EADS,CAEpB,CAAY,CAAG,EAAE,CAAC,IAAH,CAAQ,MAAR,CAAe,aAAf,EAA8B,gBAA9B,EAFK,CAItB,CAAQ,EAAI,CAAC,CAJS,EAKtB,CAAW,CAAC,MAAZ,IAEP,CAPD,CAuCH,CArEA,C","file":"durations-meta-compiled.js","sourcesContent":["$(function () {\r\n    const $prepTime = $('#cbtb_durations_prep_time_field');\r\n    const $cookTime = $('#cbtb_durations_cook_time_field');\r\n    const $saveNotice = $('#cbtb-durations-save-notice');\r\n    const $overallDurationBox = $('.cbtb-overall-duration');\r\n    const $overallDuration = $('#cbtb-duration');\r\n    const invalidInputClassToken = \"cbtb-invalid-input\";\r\n    const initialValues = {\r\n        prep: $prepTime.val(),\r\n        cook: $cookTime.val()\r\n    };\r\n\r\n    if((!initialValues.prep && !initialValues.cook)\r\n        || Number($overallDuration.text()) === 0) {\r\n        $overallDurationBox.toggle(false);\r\n    }\r\n\r\n    $prepTime\r\n        .add($cookTime)\r\n        .blur(function (e) {\r\n            validateServingsInput(e);\r\n            toggleSaveNotice();\r\n        })\r\n        .on('keyup', function (e) {\r\n            if (e.keyCode === 13) {\r\n                validateServingsInput(e);\r\n                toggleSaveNotice();\r\n            }\r\n        });\r\n\r\n    wp.data.subscribe(function () {\r\n        const isSaving = wp.data.select('core/editor').isSavingPost();\r\n        const isAutoSaving = wp.data.select('core/editor').isAutosavingPost();\r\n\r\n        if (isSaving && !isAutoSaving) {\r\n            $saveNotice.toggle(false);\r\n        }\r\n    });\r\n\r\n    function validateServingsInput(e) {\r\n        const input = Number(e.target.value);\r\n        if(Number.isNaN(input) || !Number.isInteger(input) || input < 0 || input > 9000 || !Number.isFinite(input)) {\r\n            e.target.classList.add(invalidInputClassToken);\r\n        } else {\r\n            e.target.classList.remove(invalidInputClassToken);\r\n        }\r\n        displaySum();\r\n    }\r\n\r\n    function toggleSaveNotice() {\r\n        if($prepTime.val() !== initialValues.prep || $cookTime.val() !== initialValues.cook) {\r\n            $saveNotice.toggle(true);\r\n        } else {\r\n            $saveNotice.toggle(false);\r\n        }\r\n    }\r\n\r\n    function displaySum() {\r\n        const cook = $cookTime.hasClass(invalidInputClassToken) ? 0 : Number($cookTime.val());\r\n        const prep = $prepTime.hasClass(invalidInputClassToken) ? 0 : Number($prepTime.val());\r\n        const sum = cook + prep;\r\n        if(sum) {\r\n            $overallDurationBox.toggle(true);\r\n            $overallDuration.text(sum);\r\n        } else {\r\n            $overallDurationBox.toggle(false);\r\n        }\r\n\r\n    }\r\n});"]}